# Motion Detection using Image Filtering

## Abstract
<p align="justify">
This project implemented simple motion detection on frames captured from a stationary camera. Two videos were used to test the algorithms developed, both with stationary
backgrounds and a minimal number of small objects moving across the camera at different timestamps. To accomplish motion detection, a program was written in Python that sought large gradients in the temporal evolution of the pixel values within each frame of the video and thresholded these values to produce a mask. Further methods were developed to increase the accuracy of the detection, including using both a simple 0.5[-1 0 1] filter and a 1D derivative of Gaussian filter when taking the temporal derivative, performing spatial smoothing over each frame before taking the derivative, and varying the threshold of the outputted mask to find an optimal value. Overall, the project resulted in the successful detection of motion in both videos, with the optimal filter being a Gaussian temporal filter combined with either choice of spatial filter. 
</p>

## Algorithms
### Temporal Filtering
```
Algorithm TemporalFilter(){
1. Read as many frames as the sizeof the temporal filter and
stack them along axis=0 such that every element on axis=0
corresponds to a single frame
2. Convert frames to grayscale
3. Apply spatial smoothing using the selected spatial filter
4. Define the temporal filter
5. Apply the temporal derivative filter along the axis=0 to get
the derivatives of pixel intensity across the frames using
correlation operation
6. Return the result
}
```
### Thresholding
```
algorithm Thresholding(){
1. Read the output of temporal filtering
2. For each frame from the above input do:
2.1 Calculate the stddev of each of the filtered frame (Optional: scale
it using a thresholding factor)
2.2 Create a binary mask using thresholding value as calculated
above
2.3 Perform a ‘bitwise and’ operation between the original image
frame and the mask generated above
3. Return the thresholded output
}
```
## Experiments and Observation
<p align="justify"> To begin, it was determined that there was a limited difference between using a box filter and a Gaussian filter for spatial filtering, however this depended on if the correct standard deviation was being used for the Gaussian filter </p>

<p align="justify">
Based on the experiments performed varying the standard deviation of each Gaussian filter, it was observed that changing the sigma value for the spatial filter had a strong effect on the noise generated by background pixels. For higher values such as 10, background pixels were smoothed out producing a smaller number of large pixel clusters. Contrarily, with lower values below 1, a large number of smaller pixel clusters were present. </p>

## Results
![res_motion](https://user-images.githubusercontent.com/47452095/228610737-4f6e8e75-2f2f-4d53-bd6d-8650234d2925.PNG)
